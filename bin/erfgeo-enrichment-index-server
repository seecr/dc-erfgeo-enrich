#!/usr/bin/env python2.6

from seecrdeps import includeParentAndDeps #DO_NOT_DISTRIBUTE
includeParentAndDeps(__file__)                    #DO_NOT_DISTRIBUTE

from sys import exit
from functools import partial

from seecr.utils import isRootUser
from meresco.components import ParseArguments

if __name__ == '__main__':
    if isRootUser():
        print "Do not run as root user!"
        exit(1)

    parser = ParseArguments()
    parser.addOption('-c', '--configFile', help="Config file.", mandatory=True)
    parser.addOption('', '--stateDir', help="Local statedir", mandatory=True)
    options, arguments = parser.parse()

    from digitalecollectie.erfgeo.index.server import startServer
    startServer = partial(startServer, **vars(options))
    startServer()
